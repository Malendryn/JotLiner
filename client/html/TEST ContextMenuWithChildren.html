<!DOCTYPE html>
<html>
<head>
  <style>
    #menu-bar {
      display: flex;
      background: #333;
      color: white;
      padding: 4px;
      font-family: sans-serif;
    }
    
    .menu-item {
      padding: 4px 8px;
      cursor: pointer;
      position: relative;
    }
    
    .context-menu, .submenu {
      position: absolute;
      background: #444;
      color: white;
      border: 1px solid #222;
      padding: 4px 0;
      display: none;
      z-index: 1000;
      min-width: 150px;
    }
    
    .context-menu.active, .submenu.active {
      display: block;
    }
    
    .menu-option {
      padding: 4px 12px;
      white-space: nowrap;
      cursor: pointer;
      position: relative;
    }
    
    .menu-option:hover {
      background: #555;
    }
    
    .menu-option.has-children::after {
      content: 'â–¶';
      position: absolute;
      right: 10px;
    }
  </style>
</head>
<body>
<div id="menu-bar">
  <div class="menu-item" data-menu="file">File</div>
  <div class="menu-item" data-menu="edit">Edit</div>
  <div class="menu-item" data-menu="help">Help</div>
</div>

<div id="menus-container">
  <!-- Menus will be rendered here dynamically -->
</div>
</body>
<script>
const menuData = {
  file: [
    { label: "New File" },
    { label: "Open File" },
    { label: "Recent Files", children: [
      { label: "Project1.code-workspace" },
      { label: "main.js" }
    ]},
    { label: "Exit" }
  ],
  edit: [
    { label: "Undo" },
    { label: "Redo" },
    { label: "Find", children: [
      { label: "Find" },
      { label: "Replace" }
    ]}
  ],
  help: [
    { label: "Docs" },
    { label: "About" }
  ]
};

function buildMenu(items, isSubmenu = false) {
  debugger; const menu = document.createElement('div');
  menu.className = isSubmenu ? 'submenu' : 'context-menu';

  items.forEach(item => {
    const option = document.createElement('div');
    option.className = 'menu-option';
    option.textContent = item.label;

    if (item.children) {
      option.classList.add('has-children');
      const submenu = buildMenu(item.children, true);
      option.appendChild(submenu);

      option.addEventListener('mouseenter', () => {
        debugger; submenu.classList.add('active');
        const rect = option.getBoundingClientRect();
        submenu.style.top = `${option.offsetTop}px`;
        submenu.style.left = `${option.offsetWidth}px`;
      });

      option.addEventListener('mouseleave', () => {
        debugger; submenu.classList.remove('active');
      });
    }

    menu.appendChild(option);
  });

  return menu;
}

document.querySelectorAll('.menu-item').forEach(item => {
  item.addEventListener('mouseenter', e => {
    debugger; const menuKey = item.getAttribute('data-menu');
    const container = document.getElementById('menus-container');
    container.innerHTML = ''; // remove previous menus

    const menu = buildMenu(menuData[menuKey]);
    container.appendChild(menu);

    const rect = item.getBoundingClientRect();
    menu.style.top = `${rect.bottom}px`;
    menu.style.left = `${rect.left}px`;
    menu.classList.add('active');
  });
});

// Hide menu on click elsewhere
document.addEventListener('click', () => {
  debugger; document.getElementById('menus-container').innerHTML = '';
});
</script>
</html>